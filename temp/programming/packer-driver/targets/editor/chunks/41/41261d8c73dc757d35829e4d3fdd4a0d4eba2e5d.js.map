{"version":3,"sources":["file:///C:/D-Disk/cocos%20project/ScrollTest/assets/scripts/ScrollViewPlusItem.ts"],"names":["_decorator","Component","EventHandler","ccclass","property","ScrollViewPlusItem","type","tooltip","isShowing","publishOnEnterScrollView","onEnterScorllViewEvents","length","forEach","event","emit","publishOnExitScrollView","onExitScorllViewEvents","publishOnPositionChange","xOffsetPercent","yOffsetPercent","onPositionChangeEvents"],"mappings":";;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,Y,OAAAA,Y;;;;;;;;;OAC1B;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBJ,U;AAG9B;AACA;AACA;AACA;AACA;AACA;AACA;;oCAIaK,kB,WADZF,OAAO,CAAC,oBAAD,C,UAIHC,QAAQ,CAAC;AACNE,QAAAA,IAAI,EAAE,CAACJ,YAAD,CADA;AAENK,QAAAA,OAAO,EAAE;AAFH,OAAD,C,UAMRH,QAAQ,CAAC;AACNE,QAAAA,IAAI,EAAE,CAACJ,YAAD,CADA;AAENK,QAAAA,OAAO,EAAE;AAFH,OAAD,C,UAMRH,QAAQ,CAAC;AACNE,QAAAA,IAAI,EAAE,CAACJ,YAAD,CADA;AAENK,QAAAA,OAAO,EAAE;AAFH,OAAD,C,2BAhBb,MACaF,kBADb,SACwCJ,SADxC,CACkD;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,eA2B9CO,SA3B8C,GA2BzB,KA3ByB;AAAA;;AA6B9C;AACJ;AACA;AACIC,QAAAA,wBAAwB,GAAG;AACvB,cAAI,KAAKC,uBAAL,CAA6BC,MAA7B,KAAwC,CAA5C,EAA+C;AAC3C;AACH;;AACD,eAAKD,uBAAL,CAA6BE,OAA7B,CAAqCC,KAAK,IAAI;AAC1CA,YAAAA,KAAK,CAACC,IAAN,CAAW,EAAX;AACH,WAFD;AAGH;AAED;AACJ;AACA;;;AACIC,QAAAA,uBAAuB,GAAG;AACtB,cAAI,KAAKC,sBAAL,CAA4BL,MAA5B,KAAuC,CAA3C,EAA8C;AAC1C;AACH;;AACD,eAAKK,sBAAL,CAA4BJ,OAA5B,CAAoCC,KAAK,IAAI;AACzCA,YAAAA,KAAK,CAACC,IAAN,CAAW,EAAX;AACH,WAFD;AAGH;AAGD;AACJ;AACA;AACA;AACA;AACA;;;AACIG,QAAAA,uBAAuB,CAACC,cAAD,EAAyBC,cAAzB,EAAiD;AACpE,cAAI,KAAKC,sBAAL,CAA4BT,MAA5B,IAAsC,CAA1C,EAA6C;AACzC;AACH;;AACD,eAAKS,sBAAL,CAA4BR,OAA5B,CAAoCC,KAAK,IAAI;AACzCA,YAAAA,KAAK,CAACC,IAAN,CAAW,CAACI,cAAD,EAAiBC,cAAjB,CAAX;AACH,WAFD;AAGH;;AAnE6C,O;;;;;iBAOJ,E;;;;;;;iBAMD,E;;;;;;;iBAMA,E","sourcesContent":["import { _decorator, Component, EventHandler, Label, Node } from 'cc';\nconst { ccclass, property } = _decorator;\n\n\n/**\n * 用法：\n *\n *      1. 将本组件挂载在Item节点上\n * \t\t2. 在属性面板上指定事件数组回调，即可监听 Item 「进入」和「离开」ScrollView可视区域的事件\n *\n */\n\n\n@ccclass('ScrollViewPlusItem')\nexport class ScrollViewPlusItem extends Component {\n    \n\n    @property({\n        type: [EventHandler],\n        tooltip: \"进入ScrollView时回调\"\n    })\n    onEnterScorllViewEvents: EventHandler[] = [];\n\n    @property({\n        type: [EventHandler],\n        tooltip: \"离开ScrollView时回调\"\n    })\n    onExitScorllViewEvents: EventHandler[] = [];\n\n    @property({\n        type: [EventHandler],\n        tooltip: \"进入ScrollView之后，位置发生改变时回调\"\n    })\n    onPositionChangeEvents: EventHandler[] = [];\n\n    /**\n     * 当前是否在展示中\n     *\n     * 1. 在进入和离开ScrollView期间，为true\n     * 2. 在离开ScrollView期间，为false\n     */\n    isShowing: boolean = false;\n\n    /**\n     * Item 进入 ScrollView 的时候回调\n     */\n    publishOnEnterScrollView() {\n        if (this.onEnterScorllViewEvents.length === 0) {\n            return;\n        }\n        this.onEnterScorllViewEvents.forEach(event => {\n            event.emit([]);\n        });\n    }\n\n    /**\n     * Item 离开 ScrollView 的时候回调\n     */\n    publishOnExitScrollView() {\n        if (this.onExitScorllViewEvents.length === 0) {\n            return;\n        }\n        this.onExitScorllViewEvents.forEach(event => {\n            event.emit([]);\n        });\n    }\n\n\n    /**\n     * Item 进入 ScrollView 后，位置发生移动时回调，离开ScrollView后不会回调\n     *\n     * @param xOffsetPercent 相对于 ScrollView 可视区域中心点，X的偏移量百分比，取值范围：[0, 1]。其中，0：为在可视区域最左边，1：为可视区域最右边\n     * @param yOffsetPercent 相对于 ScrollView 可视区域中心点，Y的偏移量百分比，取值范围：[0, 1]。其中，0：为在可视区域最下边，1：为可视区域最上边\n     */\n    publishOnPositionChange(xOffsetPercent: number, yOffsetPercent: number) {\n        if (this.onPositionChangeEvents.length == 0) {\n            return;\n        }\n        this.onPositionChangeEvents.forEach(event => {\n            event.emit([xOffsetPercent, yOffsetPercent]);\n        });\n    }\n\n\n}\n\n"]}